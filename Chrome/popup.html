<!--
	This file is part of Deviant Love.
	Copyright 2010 Pikadude No. 1
	Check core.js for the complete legal stuff.
-->
<!doctype html>
<html>
<link rel="stylesheet" href="core/builtinskin.css" type="text/css">
<script type="text/javascript" src="core/jquery.js"></script>
<script type="text/javascript" src="core/core.js"></script>
<script type="text/javascript">
$(document).ready( function() {
	chrome.extension.sendRequest({action: "popupSetup"},
		function(initData) {
			setL10n(initData.l10n);
			fulfillPurpose(initData.pageType);
			listenIn(chrome.extension.connect({name: "fetchFeedData"}));
		}
	)
} );
function listenIn(port) {
	port.onMessage.addListener(function(thing) {collectData(thing)});
}
chrome.extension.onRequest.addListener(function(thing, buddy, callback) {switch (thing.action) {
	case "changeTip":
		tipOfTheMoment(thing.tip);
		callback();
	break;
	case "scanningComplete":
		scanDone_startFun(thing.tip);
	break;
	case "scanError":
		scanError();
	break;
}});
function scanRetry() {
	chrome.extension.sendRequest({action: "scanRetry"});
}
var cssTransitions = {
	eventName: "webkitTransitionEnd",
	propertyName: "-webkit-transition"
};
$(document).delegate("a", "click", function(event) {
	if (event.button == 0) { window.open(this.href); }
	event.preventDefault();
} );
</script>
<body></body>
</html>