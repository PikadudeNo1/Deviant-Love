<a class="avatar {loading ? 'loading' : ''}" href="{deviant.baseURL}">
	<img ref:img width="50" height="50" alt="{deviant.name}"
		on:load="set({loading: false})" on:error="set({loading: false})">
</a>
<script>
import lookUpDeviant from "../lookUpDeviant.module.js";
export default {
	data() {
		return {loading: true};
	},
	oncreate() {
		var {deviant} = this.get();
		if (deviant.avatar) {
			this.refs.img.src = deviant.avatar;
		} else {
			lookUpDeviant(deviant.name).then( (results) => {
				if (!results.avatar) { throw false; }
				this.refs.img.src = deviant.avatar = results.avatar;
			} ).catch( () => {
				this.set({loading: false});
			} );
		}
	},
};
</script>