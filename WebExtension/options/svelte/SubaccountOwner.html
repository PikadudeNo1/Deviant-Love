<div class="subaccountOwner">
	{#if mode == "normal"}
		<div class="editorLine ownerLine">
			<span class="accountName">{owner}</span>
			<button type="button" class="changeMainAccount" on:click="set({mode: 'changeOwner'})">
				{$l10n("subaccountsEditorChangeMain")}
			</button>
		</div>
		{#each owned as subaccount}
			<div class="editorLine">
				<span class="accountName">{subaccount}</span>
				<button type="button" class="removeSubaccount"
					on:click="fire('remove', {owner, removing: subaccount})">
					{$l10n("subaccountsRemove")}</button>
			</div>
		{/each}
		<div class="editorLine">
			{#if !showAddSubaccount}
				<button type="button" class="addSubaccount" on:click="set({showAddSubaccount: true})">
					{$l10n("subaccountsEditorAddSubaccount")}
				</button>
			{:else}
				<form class="addSubaccountForm" on:submit="fire('add')">
					<input bind:value="newSubaccount" required autofocus
						placeholder="{$l10n('subaccountsEditorAddPlaceholder')}">
					<button type="submit">{$l10n("subaccountsAddConfirm")}</button>
				</form>
			{/if}
		</div>
	{:elseif mode == "changeOwner"}
		<form class="subaccountOwner changeMainAccountForm" on:submit="changeOwner()">
			<div class="editorLine ownerLine"><label>
				<input type="radio" bind:group="newOwner" name="newOwner" value="$noChange" checked>
				<span class="accountName">{owner}</span>
			</label></div>
			{#each owned as subaccount}
				<div class="editorLine"><label>
					<input type="radio" bind:group="newOwner" name="newOwner" value="{subaccount}">
					<span class="accountName">{subaccount}</span>
				</label></div>
			{/each}
			<div class="editorLine">
				<button type="submit">{$l10n("subaccountsEditorConfirmMainChange")}</button>
			</div>
		</form>
	{/if}
</div>
<script>
export default {
	data() {
		return {
			mode: "normal",
		};
	},
	methods: {
		changeOwner() {
			var {newOwner} = this.get();
			if (newOwner == "$noChange") {
				this.set({mode: "normal"});
			} else {
				this.fire("changeOwner"); // this object will be destroyed & replaced
			}
		},
	},
};
</script>